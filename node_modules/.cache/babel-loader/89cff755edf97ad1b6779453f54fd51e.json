{"ast":null,"code":"var _jsxFileName = \"/Users/george/Desktop/h2studiofrontend/src/components/cart/Cart.js\";\nimport React, { useState } from \"react\";\nimport TopNavigationaBar from \"../TopNavigationBar\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport CartItem from \"./CartItem\";\nimport { updateCartTotal } from \"../../store/cart/actions\";\nimport { MDBRow, MDBCard, MDBCardBody, MDBCardTitle, MDBTooltip, MDBTable, MDBTableBody, MDBTableHead, MDBInput, MDBBtn, MDBIcon, MDBNavLink, MDBCol } from \"mdbreact\";\nimport { Link } from \"react-router-dom\";\nimport { updateCart } from \"../../store/cart/actions\";\n\nconst Cart = props => {\n  const cart = useSelector(state => state.shoppingCart.cart);\n  const cartTotal = useSelector(state => state.shoppingCart.cartTotal);\n  const dispatch = useDispatch(); //   let newCart = cart;\n  //Force a re-render. Used when state updates, but page does not re-render as intended.\n\n  const [update, setUpdate] = useState(0); //Function passed down to remove an item from cart, and update cart store-state.\n\n  const removeOneFromCart = id => {\n    let itemIndex = cart.findIndex(cartItem => cartItem.id === id);\n    let updatedCart = cart.filter((item, index) => {\n      return index !== itemIndex;\n    });\n    let newTotal = updatedCart.reduce((acc, currentIndex) => {\n      return acc += currentIndex.price;\n    }, 0.0);\n    dispatch(updateCart(updatedCart));\n    dispatch(updateCartTotal(newTotal.toFixed(2)));\n    setUpdate(update + 1);\n  }; //Function passed down to add an item to the cart, and update cart store-state.\n\n\n  const addOneToCart = item => {\n    let updatedCart = cart;\n    updatedCart.push(item);\n    let newTotal = updatedCart.reduce((acc, currentIndex) => {\n      return acc += currentIndex.price;\n    }, 0.0);\n    dispatch(updateCart(updatedCart));\n    dispatch(updateCartTotal(newTotal.toFixed(2)));\n    setUpdate(update + 1);\n  }; //Count number of items in cart to determine quantities\n\n\n  let cartCount = {};\n  cart.forEach(cartItem => {\n    if (cartCount.hasOwnProperty(cartItem.id)) {\n      cartCount[cartItem.id]++;\n    } else {\n      cartCount[cartItem.id] = 1;\n    }\n  }); //Create an array matching cart contents with quantities\n\n  let cartArrayWithQuantities = [];\n\n  for (const key in cartCount) {\n    let currentCartItem = cart.find(cartItem => cartItem.id == key);\n    currentCartItem[\"quantity\"] = cartCount[key];\n    cartArrayWithQuantities.push(currentCartItem);\n  } //Find the total price based on current cart items and quantities\n\n\n  let total = 0.0;\n  cartArrayWithQuantities.forEach(cartItem => {\n    let currentAmount = Number((cartItem.price * cartItem.quantity).toFixed(2));\n    total += Number(currentAmount.toFixed(2));\n  }); //   const updateCartTotal = () => {\n  //     dispatch(updateCart(total.toFixed(2)));\n  //   };\n\n  let cartRows = cartArrayWithQuantities.map(cartItem => React.createElement(CartItem, {\n    product: cartItem,\n    key: cartItem.id,\n    removeOneFromCart: removeOneFromCart,\n    addOneToCart: addOneToCart //   updateCartTotal={updateCartTotal}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }));\n  console.log(\"cartTotal: \", cartTotal);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(TopNavigationaBar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), React.createElement(MDBRow, {\n    className: \"my-2\",\n    center: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(MDBCard, {\n    className: \"w-100\",\n    style: {\n      marginTop: \"15px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, cartRows.length === 0 ? React.createElement(MDBCardBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(MDBCardTitle, {\n    style: {\n      margin: \"auto\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(MDBIcon, {\n    icon: \"shopping-cart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }), \"\\xA0\\xA0You have nothing in your cart.\\xA0\\xA0\", React.createElement(Link, {\n    to: \"/store\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(MDBBtn, {\n    color: \"elegant\",\n    size: \"sm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, \"Go to store\\xA0\\xA0\", React.createElement(MDBIcon, {\n    icon: \"angle-double-right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }))))) : React.createElement(MDBCardBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(MDBTable, {\n    hover: true,\n    className: \"product-table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(MDBTableHead, {\n    className: \"font-weight-bold\" //color=\"mdb-color lighten-5\"\n    ,\n    color: \"elegant-color-dark\",\n    textWhite: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, \"Product\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, \"Price\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"Quantity\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"Amount\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }))), React.createElement(MDBTableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, cartRows, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    colSpan: \"5\",\n    style: {\n      textAlign: \"right\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, React.createElement(MDBRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(MDBCol, {\n    sm: \"5\",\n    md: \"6\",\n    lg: \"9\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    style: {\n      marginBottom: 0,\n      marginTop: \"5px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, \" Total: $\", total.toFixed(2))), React.createElement(\"small\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, \"+Shipping and Handling\")), React.createElement(MDBCol, {\n    style: {\n      textAlign: \"Left\"\n    },\n    sm: \"7\",\n    md: \"6\",\n    lg: \"3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: {\n      pathname: \"/checkout\" //   state: { total: total.toFixed(2) }\n\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, React.createElement(MDBBtn, {\n    onClick: updateCartTotal,\n    color: \"elegant\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, \"Checkout\\xA0\\xA0\\xA0\", React.createElement(MDBIcon, {\n    far: true,\n    icon: \"credit-card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  })))))))))))));\n};\n\nexport default Cart;","map":{"version":3,"sources":["/Users/george/Desktop/h2studiofrontend/src/components/cart/Cart.js"],"names":["React","useState","TopNavigationaBar","useSelector","useDispatch","CartItem","updateCartTotal","MDBRow","MDBCard","MDBCardBody","MDBCardTitle","MDBTooltip","MDBTable","MDBTableBody","MDBTableHead","MDBInput","MDBBtn","MDBIcon","MDBNavLink","MDBCol","Link","updateCart","Cart","props","cart","state","shoppingCart","cartTotal","dispatch","update","setUpdate","removeOneFromCart","id","itemIndex","findIndex","cartItem","updatedCart","filter","item","index","newTotal","reduce","acc","currentIndex","price","toFixed","addOneToCart","push","cartCount","forEach","hasOwnProperty","cartArrayWithQuantities","key","currentCartItem","find","total","currentAmount","Number","quantity","cartRows","map","console","log","marginTop","length","margin","textAlign","marginBottom","pathname"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,eAAT,QAAgC,0BAAhC;AAEA,SACEC,MADF,EAEEC,OAFF,EAGEC,WAHF,EAIEC,YAJF,EAKEC,UALF,EAMEC,QANF,EAOEC,YAPF,EAQEC,YARF,EASEC,QATF,EAUEC,MAVF,EAWEC,OAXF,EAYEC,UAZF,EAaEC,MAbF,QAcO,UAdP;AAeA,SAASC,IAAT,QAAqB,kBAArB;AAEA,SAASC,UAAT,QAA2B,0BAA3B;;AAEA,MAAMC,IAAI,GAAGC,KAAK,IAAI;AACpB,QAAMC,IAAI,GAAGrB,WAAW,CAACsB,KAAK,IAAIA,KAAK,CAACC,YAAN,CAAmBF,IAA7B,CAAxB;AACA,QAAMG,SAAS,GAAGxB,WAAW,CAACsB,KAAK,IAAIA,KAAK,CAACC,YAAN,CAAmBC,SAA7B,CAA7B;AACA,QAAMC,QAAQ,GAAGxB,WAAW,EAA5B,CAHoB,CAKpB;AAEA;;AACA,QAAM,CAACyB,MAAD,EAASC,SAAT,IAAsB7B,QAAQ,CAAC,CAAD,CAApC,CARoB,CAUpB;;AACA,QAAM8B,iBAAiB,GAAGC,EAAE,IAAI;AAC9B,QAAIC,SAAS,GAAGT,IAAI,CAACU,SAAL,CAAeC,QAAQ,IAAIA,QAAQ,CAACH,EAAT,KAAgBA,EAA3C,CAAhB;AACA,QAAII,WAAW,GAAGZ,IAAI,CAACa,MAAL,CAAY,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC7C,aAAOA,KAAK,KAAKN,SAAjB;AACD,KAFiB,CAAlB;AAIA,QAAIO,QAAQ,GAAGJ,WAAW,CAACK,MAAZ,CAAmB,CAACC,GAAD,EAAMC,YAAN,KAAuB;AACvD,aAAQD,GAAG,IAAIC,YAAY,CAACC,KAA5B;AACD,KAFc,EAEZ,GAFY,CAAf;AAIAhB,IAAAA,QAAQ,CAACP,UAAU,CAACe,WAAD,CAAX,CAAR;AACAR,IAAAA,QAAQ,CAACtB,eAAe,CAACkC,QAAQ,CAACK,OAAT,CAAiB,CAAjB,CAAD,CAAhB,CAAR;AACAf,IAAAA,SAAS,CAACD,MAAM,GAAG,CAAV,CAAT;AACD,GAbD,CAXoB,CA0BpB;;;AACA,QAAMiB,YAAY,GAAGR,IAAI,IAAI;AAC3B,QAAIF,WAAW,GAAGZ,IAAlB;AAEAY,IAAAA,WAAW,CAACW,IAAZ,CAAiBT,IAAjB;AAEA,QAAIE,QAAQ,GAAGJ,WAAW,CAACK,MAAZ,CAAmB,CAACC,GAAD,EAAMC,YAAN,KAAuB;AACvD,aAAQD,GAAG,IAAIC,YAAY,CAACC,KAA5B;AACD,KAFc,EAEZ,GAFY,CAAf;AAIAhB,IAAAA,QAAQ,CAACP,UAAU,CAACe,WAAD,CAAX,CAAR;AACAR,IAAAA,QAAQ,CAACtB,eAAe,CAACkC,QAAQ,CAACK,OAAT,CAAiB,CAAjB,CAAD,CAAhB,CAAR;AACAf,IAAAA,SAAS,CAACD,MAAM,GAAG,CAAV,CAAT;AACD,GAZD,CA3BoB,CAyCpB;;;AACA,MAAImB,SAAS,GAAG,EAAhB;AACAxB,EAAAA,IAAI,CAACyB,OAAL,CAAad,QAAQ,IAAI;AACvB,QAAIa,SAAS,CAACE,cAAV,CAAyBf,QAAQ,CAACH,EAAlC,CAAJ,EAA2C;AACzCgB,MAAAA,SAAS,CAACb,QAAQ,CAACH,EAAV,CAAT;AACD,KAFD,MAEO;AACLgB,MAAAA,SAAS,CAACb,QAAQ,CAACH,EAAV,CAAT,GAAyB,CAAzB;AACD;AACF,GAND,EA3CoB,CAmDpB;;AACA,MAAImB,uBAAuB,GAAG,EAA9B;;AACA,OAAK,MAAMC,GAAX,IAAkBJ,SAAlB,EAA6B;AAC3B,QAAIK,eAAe,GAAG7B,IAAI,CAAC8B,IAAL,CAAUnB,QAAQ,IAAIA,QAAQ,CAACH,EAAT,IAAeoB,GAArC,CAAtB;AACAC,IAAAA,eAAe,CAAC,UAAD,CAAf,GAA8BL,SAAS,CAACI,GAAD,CAAvC;AACAD,IAAAA,uBAAuB,CAACJ,IAAxB,CAA6BM,eAA7B;AACD,GAzDmB,CA2DpB;;;AACA,MAAIE,KAAK,GAAG,GAAZ;AACAJ,EAAAA,uBAAuB,CAACF,OAAxB,CAAgCd,QAAQ,IAAI;AAC1C,QAAIqB,aAAa,GAAGC,MAAM,CAAC,CAACtB,QAAQ,CAACS,KAAT,GAAiBT,QAAQ,CAACuB,QAA3B,EAAqCb,OAArC,CAA6C,CAA7C,CAAD,CAA1B;AACAU,IAAAA,KAAK,IAAIE,MAAM,CAACD,aAAa,CAACX,OAAd,CAAsB,CAAtB,CAAD,CAAf;AACD,GAHD,EA7DoB,CAkEpB;AACA;AACA;;AAEA,MAAIc,QAAQ,GAAGR,uBAAuB,CAACS,GAAxB,CAA4BzB,QAAQ,IACjD,oBAAC,QAAD;AACE,IAAA,OAAO,EAAEA,QADX;AAEE,IAAA,GAAG,EAAEA,QAAQ,CAACH,EAFhB;AAGE,IAAA,iBAAiB,EAAED,iBAHrB;AAIE,IAAA,YAAY,EAAEe,YAJhB,CAKE;AALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADa,CAAf;AAUAe,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BnC,SAA3B;AAEA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAC,MAAlB;AAAyB,IAAA,MAAM,MAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAAS,IAAA,SAAS,EAAC,OAAnB;AAA2B,IAAA,KAAK,EAAE;AAAEoC,MAAAA,SAAS,EAAE;AAAb,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,QAAQ,CAACK,MAAT,KAAoB,CAApB,GACC,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,YAAD;AAAc,IAAA,KAAK,EAAE;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAC,eAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,oDAME,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,SAAd;AAAwB,IAAA,IAAI,EAAC,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAEE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CANF,CADF,CADD,GAiBC,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,QAAD;AAAU,IAAA,KAAK,MAAf;AAAgB,IAAA,SAAS,EAAC,eAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,YAAD;AACE,IAAA,SAAS,EAAC,kBADZ,CAEE;AAFF;AAGE,IAAA,KAAK,EAAC,oBAHR;AAIE,IAAA,SAAS,MAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CANF,CADF,EAiBE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGN,QADH,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,OAAO,EAAC,GAAZ;AAAgB,IAAA,KAAK,EAAE;AAAEO,MAAAA,SAAS,EAAE;AAAb,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAaE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,EAAE,EAAC,GAAX;AAAe,IAAA,EAAE,EAAC,GAAlB;AAAsB,IAAA,EAAE,EAAC,GAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,KAAK,EAAE;AAAEC,MAAAA,YAAY,EAAE,CAAhB;AAAmBJ,MAAAA,SAAS,EAAE;AAA9B,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAaR,KAAK,CAACV,OAAN,CAAc,CAAd,CAAb,CADF,CADF,EAIE;AAAO,IAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAJF,CADF,EASE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAE;AAAEqB,MAAAA,SAAS,EAAE;AAAb,KADT;AAEE,IAAA,EAAE,EAAC,GAFL;AAGE,IAAA,EAAE,EAAC,GAHL;AAIE,IAAA,EAAE,EAAC,GAJL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME,oBAAC,IAAD;AACE,IAAA,EAAE,EAAE;AACFE,MAAAA,QAAQ,EAAE,WADR,CAEF;;AAFE,KADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE9D,eAAjB;AAAkC,IAAA,KAAK,EAAC,SAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAEE,oBAAC,OAAD;AAAS,IAAA,GAAG,MAAZ;AAAa,IAAA,IAAI,EAAC,aAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CANF,CANF,CATF,CAbF,CADF,CAFF,CAjBF,CADF,CAlBJ,CADF,CAFF,CADF;AA8FD,CAhLD;;AAiLA,eAAegB,IAAf","sourcesContent":["import React, { useState } from \"react\";\nimport TopNavigationaBar from \"../TopNavigationBar\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport CartItem from \"./CartItem\";\nimport { updateCartTotal } from \"../../store/cart/actions\";\n\nimport {\n  MDBRow,\n  MDBCard,\n  MDBCardBody,\n  MDBCardTitle,\n  MDBTooltip,\n  MDBTable,\n  MDBTableBody,\n  MDBTableHead,\n  MDBInput,\n  MDBBtn,\n  MDBIcon,\n  MDBNavLink,\n  MDBCol\n} from \"mdbreact\";\nimport { Link } from \"react-router-dom\";\n\nimport { updateCart } from \"../../store/cart/actions\";\n\nconst Cart = props => {\n  const cart = useSelector(state => state.shoppingCart.cart);\n  const cartTotal = useSelector(state => state.shoppingCart.cartTotal);\n  const dispatch = useDispatch();\n\n  //   let newCart = cart;\n\n  //Force a re-render. Used when state updates, but page does not re-render as intended.\n  const [update, setUpdate] = useState(0);\n\n  //Function passed down to remove an item from cart, and update cart store-state.\n  const removeOneFromCart = id => {\n    let itemIndex = cart.findIndex(cartItem => cartItem.id === id);\n    let updatedCart = cart.filter((item, index) => {\n      return index !== itemIndex;\n    });\n\n    let newTotal = updatedCart.reduce((acc, currentIndex) => {\n      return (acc += currentIndex.price);\n    }, 0.0);\n\n    dispatch(updateCart(updatedCart));\n    dispatch(updateCartTotal(newTotal.toFixed(2)));\n    setUpdate(update + 1);\n  };\n\n  //Function passed down to add an item to the cart, and update cart store-state.\n  const addOneToCart = item => {\n    let updatedCart = cart;\n\n    updatedCart.push(item);\n\n    let newTotal = updatedCart.reduce((acc, currentIndex) => {\n      return (acc += currentIndex.price);\n    }, 0.0);\n\n    dispatch(updateCart(updatedCart));\n    dispatch(updateCartTotal(newTotal.toFixed(2)));\n    setUpdate(update + 1);\n  };\n\n  //Count number of items in cart to determine quantities\n  let cartCount = {};\n  cart.forEach(cartItem => {\n    if (cartCount.hasOwnProperty(cartItem.id)) {\n      cartCount[cartItem.id]++;\n    } else {\n      cartCount[cartItem.id] = 1;\n    }\n  });\n\n  //Create an array matching cart contents with quantities\n  let cartArrayWithQuantities = [];\n  for (const key in cartCount) {\n    let currentCartItem = cart.find(cartItem => cartItem.id == key);\n    currentCartItem[\"quantity\"] = cartCount[key];\n    cartArrayWithQuantities.push(currentCartItem);\n  }\n\n  //Find the total price based on current cart items and quantities\n  let total = 0.0;\n  cartArrayWithQuantities.forEach(cartItem => {\n    let currentAmount = Number((cartItem.price * cartItem.quantity).toFixed(2));\n    total += Number(currentAmount.toFixed(2));\n  });\n\n  //   const updateCartTotal = () => {\n  //     dispatch(updateCart(total.toFixed(2)));\n  //   };\n\n  let cartRows = cartArrayWithQuantities.map(cartItem => (\n    <CartItem\n      product={cartItem}\n      key={cartItem.id}\n      removeOneFromCart={removeOneFromCart}\n      addOneToCart={addOneToCart}\n      //   updateCartTotal={updateCartTotal}\n    />\n  ));\n\n  console.log(\"cartTotal: \", cartTotal);\n\n  return (\n    <div>\n      <TopNavigationaBar />\n      <MDBRow className=\"my-2\" center>\n        <MDBCard className=\"w-100\" style={{ marginTop: \"15px\" }}>\n          {cartRows.length === 0 ? (\n            <MDBCardBody>\n              <MDBCardTitle style={{ margin: \"auto\" }}>\n                <MDBIcon icon=\"shopping-cart\"></MDBIcon>&nbsp;&nbsp;You have\n                nothing in your cart.&nbsp;&nbsp;\n                {/* <MDBNavLink size=\"sm\" to=\"/cart\">\n                  Go to store\n                </MDBNavLink> */}\n                <Link to=\"/store\">\n                  <MDBBtn color=\"elegant\" size=\"sm\">\n                    Go to store&nbsp;&nbsp;\n                    <MDBIcon icon=\"angle-double-right\" />\n                  </MDBBtn>\n                </Link>\n              </MDBCardTitle>\n            </MDBCardBody>\n          ) : (\n            <MDBCardBody>\n              <MDBTable hover className=\"product-table\">\n                <MDBTableHead\n                  className=\"font-weight-bold\"\n                  //color=\"mdb-color lighten-5\"\n                  color=\"elegant-color-dark\"\n                  textWhite\n                >\n                  <tr>\n                    <th></th>\n                    <th>Product</th>\n                    <th>Price</th>\n                    <th>Quantity</th>\n                    <th>Amount</th>\n                    <th></th>\n                  </tr>\n                </MDBTableHead>\n\n                <MDBTableBody>\n                  {cartRows}\n                  <tr>\n                    <td colSpan=\"5\" style={{ textAlign: \"right\" }}>\n                      {/* <h5>\n                        <b> Total: ${total.toFixed(2)}</b>&nbsp;&nbsp;&nbsp;\n                        <small className=\"text-muted\">\n                            Full name as displayed on card\n                          </small>\n                        <Link to=\"/checkout\">\n                          <MDBBtn color=\"elegant\">\n                            Checkout&nbsp;&nbsp;&nbsp;\n                            <MDBIcon far icon=\"credit-card\" />\n                          </MDBBtn>\n                        </Link>\n                      </h5> */}\n                      <MDBRow>\n                        <MDBCol sm=\"5\" md=\"6\" lg=\"9\">\n                          <h5 style={{ marginBottom: 0, marginTop: \"5px\" }}>\n                            <b> Total: ${total.toFixed(2)}</b>\n                          </h5>\n                          <small className=\"text-muted\">\n                            +Shipping and Handling\n                          </small>\n                        </MDBCol>\n                        <MDBCol\n                          style={{ textAlign: \"Left\" }}\n                          sm=\"7\"\n                          md=\"6\"\n                          lg=\"3\"\n                        >\n                          <Link\n                            to={{\n                              pathname: \"/checkout\"\n                              //   state: { total: total.toFixed(2) }\n                            }}\n                          >\n                            <MDBBtn onClick={updateCartTotal} color=\"elegant\">\n                              Checkout&nbsp;&nbsp;&nbsp;\n                              <MDBIcon far icon=\"credit-card\" />\n                            </MDBBtn>\n                          </Link>\n                        </MDBCol>\n                      </MDBRow>\n                    </td>\n                  </tr>\n                </MDBTableBody>\n              </MDBTable>\n            </MDBCardBody>\n          )}\n        </MDBCard>\n      </MDBRow>\n    </div>\n  );\n};\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}